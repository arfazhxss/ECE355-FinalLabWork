\section{Problem Description and Technical Specifications}\label{sec:problem-descr}

\subsection{Objectives}
This project aims to develop a sophisticated embedded system that combines signal generation, measurement, and control capabilities. The system is built around the STM32F0 Discovery microcontroller board interfacing with a PBMCUSLK project board, with the following core objectives:

\begin{itemize}[leftmargin=2em]
    \item \textbf{System Architecture:} Implementation based on STM32F051R8 microcontroller:
    \begin{itemize}
        \item Integration of multiple peripherals: GPIO, ADC, DAC, TIM2, EXTI
        \item SPI communication protocol for OLED display control
        \item Dual-mode operation with button-based switching
    \end{itemize}
    
    \item \textbf{Dual Signal Generation and Monitoring:} Design and implementation of a system capable of working with two distinct signal sources:
    \begin{itemize}
        \item A PWM signal generated by an NE555 timer circuit
        \item A square wave signal from an external Function Generator
        \item 12-bit ADC resolution for high-accuracy signal capture
    \end{itemize}
    
    \item \textbf{Dynamic Signal Control:} Development of a feedback system where:
    \begin{itemize}
        \item The potentiometer voltage controls the 555 timer's PWM characteristics
        \item An optocoupler (4N35) provides electrical isolation and signal control
        \item The DAC output modulates the optocoupler's behavior
        \item Real-time DAC signal generation for testing and analysis
    \end{itemize}
    
    \item \textbf{Operational Modes:} Implementation of two distinct operational modes:
    \begin{itemize}
        \item Function Generator Mode: Displays computed frequency and resistance
        \item ADC/DAC Mode: Shows live ADC and DAC values
        \item External button-based mode switching capability
    \end{itemize}
    
    \item \textbf{Real-time Measurement System:} Creation of a measurement system that:
    \begin{itemize}
        \item Continuously monitors potentiometer voltage through ADC polling
        \item Calculates actual resistance values using voltage divider formulas
        \item Accurately measures signal frequencies from both sources
    \end{itemize}
    
    \item \textbf{User Interface:} Implementation of an OLED-based display system that:
    \begin{itemize}
        \item Shows current frequency measurements
        \item Displays calculated potentiometer resistance
        \item Provides visual feedback for system operation
        \item Supports real-time data visualization for both operational modes
    \end{itemize}
\end{itemize}

\subsection{Technical Specifications}
The implementation must adhere to specific technical requirements and constraints:

\begin{itemize}[leftmargin=2em]
    \item \textbf{Microcontroller Interface Requirements:}
    \begin{itemize}
        \item USER button configuration on PA0 with EXTI0 interrupt capability
        \item 555 timer signal measurement on PA1 utilizing EXTI1
        \item Function Generator signal measurement on PA2 using EXTI2
        \item DAC output on PA4 for optocoupler control
        \item ADC input on PA5 for potentiometer voltage measurement
    \end{itemize}
    
    \item \textbf{Signal Processing Requirements:}
    \begin{itemize}
        \item Continuous ADC polling for potentiometer voltage measurement
        \item Real-time conversion of voltage readings to resistance values
        \item Accurate frequency measurement of both signal sources
        \item Interrupt-driven source switching capability
    \end{itemize}
    
    \item \textbf{System Integration Features:}
    \begin{itemize}
        \item Seamless switching between signal sources via USER button
        \item Dynamic update of display information
        \item Proper electrical isolation through optocoupler
        \item Stable operation across varying input conditions
    \end{itemize}

	\item \textbf{Pedagogical Constraints and Development Guidelines}~\cite{lab-manual}:
	\begin{itemize}
    	\item \textbf{Potentiometer Voltage Polling:} Voltage values from the potentiometer must be obtained using a polling approach.
    	\item \textbf{Specific Pin Assignments:} Fixed pin assignments must be followed (e.g., PA0 for USER button, PA1 for 555 timer signal input, etc.).
    	\item \textbf{USER Button Interrupts:} The USER button (PA0) must trigger an interrupt using EXTI0 to switch frequency measurements.
    	\item \textbf{Frequency Measurement via TIM2:} TIM2 must be used to measure both the Function Generator and 555 timer signal frequencies.
    	\item \textbf{DAC-Controlled PWM Frequency:} The DAC (PA4) must drive the optocoupler to adjust the 555 timerâ€™s PWM frequency.
    	\item \textbf{SPI Communication for LED Display:} SPI pins (PB3, PB4, PB5, PB6, PB7) must be used to drive the SSD1306 LED display.
    	\item \textbf{Voltage Measurement Limits:} The lower and upper limits of the potentiometer voltage must be determined to calculate the corresponding resistance.
    	\item \textbf{Reserved Pins:} PA13 and PA14 are reserved for ST-LINK communication and must not be used.
	\end{itemize}
\end{itemize}
